class Gradientify{constructor(i){this.input=i,this.interval=null,this.gradients=[],this.mainElement=i.element,this.mainGradientIndex=0,this.init=this.init.bind(this),this.createGradientElement=this.createGradientElement.bind(this),this.initialiseInterval=this.initialiseInterval.bind(this),this.makeNewGradientVisible=this.makeNewGradientVisible.bind(this),this.loadJSON=this.loadJSON.bind(this),"string"==typeof i.gradients?this.getPreset(i.gradients):this.init()}init(){this.gradients=[],this.input.gradients.map((i,t)=>{let e=this.createGradientElement({backgroundImage:i,index:t,position:this.input.fixed,transitionDuration:this.input.interval});this.input.fixed&&(this.mainElement.style.overflow="hidden"),this.gradients.push(e),this.mainElement.append(e)}),clearInterval(this.interval),this.initialiseInterval({interval:this.input.interval,delay:this.input.delay})}createGradientElement(i){let t=document.createElement("div");return Object.assign(t.style,{backgroundImage:i.backgroundImage,opacity:i.index===this.mainGradientIndex?1:0,transitionDuration:`${i.transitionDuration/1e3}s`,position:i.fixed?"fixed":"absolute"}),t.classList.add("gradientify-gradient"),t}getPreset(i){this.loadJSON(t=>{this.input.gradients=t[i].gradients,this.init()})}loadJSON(i){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","./src/presets.json",!0),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&i(JSON.parse(t.responseText))},t.send(null)}initialiseInterval(i){this.makeNewGradientVisible(),this.interval=setInterval(()=>{this.makeNewGradientVisible()},i.interval+i.delay+40)}makeNewGradientVisible(){this.gradients.map((i,t)=>{t===this.mainGradientIndex?i.style.opacity=1:i.style.opacity=0}),this.mainGradientIndex=++this.mainGradientIndex%this.gradients.length}}